# File Statistics CLI

Консольная утилита для подсчёта статистики по файлам в указанном каталоге. Подсчитывает количество файлов, их общий размер, строки, непустые строки и строки с комментариями (Java, Bash) — всё в разрезе расширений.

> _Это решение было разработано как часть тестового задания — с акцентом на чистую архитектуру, многопоточность и соответствие требованиям._

---
## Содержание

- [Основные возможности](#основные-возможности)
- [Установка и запуск](#установка-и-запуск)
- [Параметры](#параметры)
- [Форматы вывода](#форматы-вывода)
- [Примеры использования](#примеры-использования)
- [Технологии](#технологии)

---
## Основные возможности

- Поддержка рекурсивного обхода с ограничением глубины (`--recursive`, `--max-depth`)
- Фильтрация файлов по расширениям (`--include-ext`, `--exclude-ext`)
- Игнорирование файлов согласно `.gitignore` (`--git-ignore`)
- Многопоточный анализ (`--thread`)
- Вывод в трёх форматах: plain text, JSON, XML (`--output`)
- Подсчёт строк с комментариями для Java (`//`, `/* */`) и Bash (`#`)
- Подсчёт непустых строк (строки, содержащие хотя бы один печатный символ)
- Поддержка мультиплатформенности (Windows, macOS, Linux)
- Опциональный подробный вывод о проигнорированных файлах (`--verbose`)

---
## Установка и запуск

1. Убедитесь, что у вас установлены [Java 17+](https://adoptium.net/) и [Maven](https://maven.apache.org/install.html) .
2. Соберите JAR-файл:
``` bash
mvn clean package
```
3. Запустите утилиту, указав путь к каталогу:
``` bash
java -jar target/file-statistics-1.0-SNAPSHOT.jar /path/to/your/project
```

---
## Параметры

Утилита принимает следующие параметры командной строки:

| **Параметр**                   | **Тип**  | **Описание**                                                                                                                                                                                                                                                                          |
|--------------------------------|----------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `<path>`                       | `String` | (Обязательный) Путь до каталога, по которому нужно выполнить сбор статистики.                                                                                                                                                                                                         |
| `--recursive`                  | `Флаг`   | Выполнять обход дерева каталогов рекурсивно. Без указания этого флага анализируется только содержимое указанного каталога (без подкаталогов).                                                                                                                                         |
| `--max-depth=<number>`         | `Целое`  | Глубина рекурсивного обхода. Требует указания`--recursive`. Значение`0`означает анализ только файлов в корневом каталоге. Значение`1`— файлы в корне и на один уровень вложенности, и т.д. Значение`-1`(или неуказание`--max-depth`при`--recursive`) означает неограниченную глубину. |
| `--thread=<number>`            | `Целое`  | Количество потоков, используемых для анализа файлов. По умолчанию: 1.                                                                                                                                                                                                                 |
| `--include-ext=<ext1,ext2,..>` | `String` | Обрабатывать файлы _только_ с указанными расширениями (без точки). Список расширений разделяется запятыми. Если список пуст, учитываются все расширения (если не исключены через`--exclude-ext`).                                                                                     |
| `--exclude-ext=<ext1,ext2,..>` | `String` | _Не_ обрабатывать файлы с указанными расширениями (без точки). Список расширений разделяется запятыми. Имеет приоритет над`--include-ext`, если они используются совместно.                                                                                                           |
| `--git-ignore`                 | `Флаг`   | Не обрабатывать файлы, указанные в файлах`.gitignore`, найденных в дереве каталогов.                                                                                                                                                                                                  |
| `--output=<plain\|xml\|json>`  | `String` | Формат вывода статистики. Допустимые значения:`plain`(по умолчанию),`xml`,`json`.                                                                                                                                                                                                     |
| `--verbose`                    | `Флаг`   | Выводить дополнительную информацию о количестве проигнорированных файлов (по`.gitignore`, по расширению, бинарные/кодировка).                                                                                                                                                         |
| `-h`,`--help`                  | `Флаг`   | Показать справку по использованию и доступным параметрам.                                                                                                                                                                                                                             |

---
## Форматы вывода

Утилита поддерживает три формата вывода статистики:

- **plain**: Человеко-читаемый текст. Формат по умолчанию. Представляет статистику в виде списка, сгруппированного по расширениям файлов.
- **json**: Структурированный формат JSON. Полезен для автоматического анализа и интеграции с другими инструментами.
- **xml**: Структурированный формат XML. Также полезен для автоматического анализа и интеграции.

---
## Примеры использования

``` bash
# Базовый вызов: анализ каталога без рекурсии
java -jar file-statistics.jar ~/src

# Рекурсивный анализ, ограничение глубины, 4 потока, вывод в JSON
java -jar file-statistics.jar ~/src --recursive --max-depth=2 --thread=4 --output=json

# Использовать только файлы .java и .xml, исключить .tmp и .log
java -jar file-statistics.jar ~/src --recursive --include-ext=java,xml --exclude-ext=tmp,log

# Игнорировать файлы из .gitignore, показать статистику игнорирования
java -jar file-statistics.jar ~/src --git-ignore --verbose

# Вывести справку
java -jar file-statistics.jar --help
```

---
## Технологии

- **Java 17+**: Язык программирования.
- **Maven**: Система сборки и управления зависимостями.
- **Jackson**: Библиотека для сериализации/десериализации JSON.
- **JAXB**: Библиотека для сериализации/десериализации XML.
- **jgit**: Библиотека для корректной обработки файлов `.gitignore`.
- **SLF4J + slf4j-simple**: API и реализация для логирования (используется `jgit`).
